<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<script src="//unpkg.com/vue/dist/vue.js"></script>
<script src="//unpkg.com/element-ui@2.4.8/lib/index.js"></script>
<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">

<body>


<div id="app">

    姓名：<el-input v-model="inName" placeholder="请输入内容" style="width: auto"@keyup.enter.native="add"  clearable ></el-input>
    地址：<el-input v-model="inAddress" placeholder="请输入内容" @keydown.enter.native="add" style="width: auto" clearable></el-input>
    <el-button style="width: auto" @click="add" >添加</el-button> &nbsp;&nbsp;
    搜索关键字：<el-input v-model="inSearch" placeholder="请输入内容" style="width: auto" clearable @change="keySearch"></el-input>
    <p></p>

    <template>
        <el-table :data="tableData" border style="width: auto">
            <el-table-column prop="userId" label="Id" style="width: auto">
            </el-table-column>
            <el-table-column prop="date" label="日期" style="width: auto">
            </el-table-column>
            <el-table-column prop="name" label="姓名" style="width: auto">
            </el-table-column>
            <el-table-column prop="address" label="地址" style="width: auto">
            </el-table-column>
            <el-table-column  label="操作"  style="width: auto">
                <template slot-scope="scope">
                    <el-button type="text" size="small" disabled="disabled">查看</el-button>
                    <el-button type="text" size="small" disabled="disabled">编辑</el-button>
                    <el-button type="text" size="small" @click="del(scope.row.userId)">删除</el-button>
                </template>
            </el-table-column>

        </el-table>
    </template>
</div>

</body>

<script>
    // var Main = {
    //     data() {
    //         return {
    //             tableData: [{
    //                 date: '2016-05-02',
    //                 name: '王小虎',
    //                 address: '上海市普陀区金沙江路 1518 弄'
    //             }, {
    //                 date: '2016-05-04',
    //                 name: '王小虎',
    //                 address: '上海市普陀区金沙江路 1517 弄'
    //             }, {
    //                 date: '2016-05-01',
    //                 name: '王小虎',
    //                 address: '上海市普陀区金沙江路 1519 弄'
    //             }, {
    //                 date: '2016-05-03',
    //                 name: '王小虎',
    //                 address: '上海市普陀区金沙江路 1516 弄'
    //             }]
    //         }
    //     }
    // }
    // var Ctor = Vue.extend(Main)
    // new Ctor().$mount('#app')

    var temp =new Vue({
        el:'#app',
        data:{
            inName:'',
            inAddress:'',
            inSearch:'',
            tableData: [{
                userId:'1',
                date: new Date().toString(),
                name: '张三',
                address: '上海市普陀区金沙江路 1518 弄',

            },{
                    userId:'2',
                    date: new Date().toString(),
                    name: '李四',
                    address: '上海市普陀区金沙江路 1517 弄'
                },{
                    userId:'3',
                    date: new Date().toString(),
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1519 弄'
                },{
                    userId:'4',
                    date: new Date().toString(),
                    name: '赵柳',
                    address: '上海市普陀区金沙江路 1516 弄'
                }]
        },
        methods:{
            del(myid){
                console.log(myid)
                var myindex = this.tableData.findIndex(item => {
                    if(item.userId === myid)return true;
                })
                this.tableData.splice(myindex,1)
            },
            add(){
                if(this.inName==='')return this.$message.error('姓名不能为空')
                if(this.inAddress==='')return this.$message.error('地址不能为空')
                // console.log(this.inName+'-----'+this.inAddress)
                // this.tableData.unshift({userId:this.tableData.length+1,date:new Date().toString(),name:this.inName,address:this.inAddress})
                // console.log(this.tableData.length)
                this.tableData.push({userId:this.tableData.length+1,date:new Date().toString(),name:this.inName,address:this.inAddress})
                this.inName='',this.inAddress=''
            },
            keySearch(){
                return this.tableData.filter(item => {

                    if(item.name.includes(this.inSearch)){
                        this.tableData =item
                        console.log(item);
                        return item;
                    }

                })

            }
        }
    })

</script>
</html>